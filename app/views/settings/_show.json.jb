# TODO: Username to User
# TODO: CanCancan!
setting_active = can? :show, setting

json = {
  active: setting_active,
  params: setting.package.filtered_params,
}

json[:package] = render "packages/short", package: setting.package

json.merge!(render("packages/includes", package: setting.package)) if setting_active

json
