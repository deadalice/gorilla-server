json = {
  name: part.name,
  description: part.description,
  destination: part.destination,
  script: part.script,
  url: part.archive ? nil : url_for(part.archive)
}

json[:files] = part.files.map do |file|
  render 'layouts/file', file: file
end

json
