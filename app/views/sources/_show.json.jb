json = {
  description: source.description,
  created_at: source.created_at.to_i,
  updated_at: source.updated_at.to_i
}

if source.ready?
  json[:file] = render 'layouts/file', file: source.file
end

json[:state] = source.state

json.compact
