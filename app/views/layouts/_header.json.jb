json = {}

new_token = current_anyone&.reset_token

if new_token.present?
  json[:session] = {
    token: new_token,
  }
end

unless @pagy.nil?
  json[:page] = @pagy.page
  json[:pages] = @pagy.pages
  json[:from] = @pagy.from
  json[:to] = @pagy.to
end

if @object && @object.errors.any?
  json[:errors] = @object
end

notifications =
  current_anyone&.notifications
json[:notifications] = notifications if notifications&.any?

json
